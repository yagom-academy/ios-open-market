# ì˜¤í”ˆë§ˆì¼“ 

## ğŸ™‹ğŸ»â€â™‚ï¸ í”„ë¡œì íŠ¸ ì†Œê°œ
ì˜¤í”ˆë§ˆì¼“ ì–´í”Œ ì…ë‹ˆë‹¤ 

> í”„ë¡œì íŠ¸ ê¸°ê°„: 2022-07-11 ~ 2022-08-05</br>
> íŒ€ì›: [ë°±ê³°](https://github.com/Baek-Gom-95), [ë¸Œë˜ë“œ](https://github.com/bradheo65) </br>
ë¦¬ë·°ì–´: [Corn](https://github.com/protocorn93)</br>
ê·¸ë¼ìš´ë“œë¡¤: [GroundRule](https://github.com/Jeon-Minsu/ios-open-market/tree/step01/Docs/GroundRule.md)

## ğŸ“‘ ëª©ì°¨

- [ğŸ§‘ğŸ»â€ğŸ’»ğŸ§‘ğŸ»â€ğŸ’» ê°œë°œì ì†Œê°œ](#-ê°œë°œì-ì†Œê°œ)
- [ğŸ“± ë™ì‘ í™”ë©´](#-ë™ì‘-í™”ë©´)
- [ğŸ’¡ í‚¤ì›Œë“œ](#-í‚¤ì›Œë“œ)
- [ğŸ¤” í•µì‹¬ê²½í—˜](#-í•µì‹¬ê²½í—˜)
- [ğŸ“š ì°¸ê³ ë¬¸ì„œ](#-ì°¸ê³ ë¬¸ì„œ)
- [ğŸ“ ê¸°ëŠ¥ì„¤ëª…](#-ê¸°ëŠ¥ì„¤ëª…)
- [ğŸš€ TroubleShooting](#-TroubleShooting)
    - [ğŸš€ STEP 1](#-STEP-1)
    - [ğŸš€ STEP 2](#-STEP-2)
    - [ğŸš€ STEP 3](#-STEP-3)

- STEP ìƒì„¸ ë‚´ìš©
    - [1ï¸âƒ£ STEP 1](https://github.com/bradheo65/ios-open-market/blob/Step1/Docs/Step01.md)
    - [2ï¸âƒ£ STEP 2](https://github.com/bradheo65/ios-open-market/blob/Step2/Docs/Step02.md)
    - [3ï¸âƒ£ STEP 3](https://github.com/bradheo65/ios-open-market/blob/Step2/Docs/Step03.md)
## ğŸ§‘ğŸ»â€ğŸ’»ğŸ§‘ğŸ»â€ğŸ’» ê°œë°œì ì†Œê°œ

|||
|:---:|:---:|
|<image src = "https://user-images.githubusercontent.com/45350356/174251611-46adf61c-93fa-42a0-815b-2c998af1c258.png" width="250" height="250">| <image src = "https://i.imgur.com/c17eEk8.jpg" width="250" height="250">
|[ë¸Œë˜ë“œ](https://github.com/bradheo65)|[ë°±ê³°](https://github.com/Baek-Gom-95)|  
    
## ğŸ“± ë™ì‘ í™”ë©´

### í˜•íƒœë³„ ë™ì‘ í™”ë©´
|LIST|GRID|
|:---:|:---:|
|<image src = "https://user-images.githubusercontent.com/45350356/180375191-93a7e49e-acf9-45e3-a4cc-619ca86affd1.gif" width="250" height="500">| <image src = "https://user-images.githubusercontent.com/45350356/180376138-1d97f86a-92b0-4f10-86a7-9c7e5d9e6165.gif" width="250" height="500">


## ğŸ’¡ í‚¤ì›Œë“œ
- HTTP
- URLSession
- URLSession Unit Test
- AutoLayout
- URLSession GET
- CollectionView
- Modern CollectionView
- Cache
- API
- UIImagePicker
- ResizeImage
    
## ğŸ¤” í•µì‹¬ê²½í—˜
- [x] íŒŒì‹±í•œ JSON ë°ì´í„°ì™€ ë§¤í•‘í•  ëª¨ë¸ ì„¤ê³„
- [x] URL Sessionì„ í™œìš©í•œ ì„œë²„ì™€ì˜ í†µì‹ 
- [x] CodingKeys í”„ë¡œí† ì½œì˜ í™œìš©
- [x] ë„¤íŠ¸ì›Œí¬ ìƒí™©ê³¼ ë¬´ê´€í•œ ë„¤íŠ¸ì›Œí‚¹ ë°ì´í„° íƒ€ì…ì˜ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸(Unit Test)
- [x] Safe Areaì„ ê³ ë ¤í•œ ì˜¤í†  ë ˆì´ì•„ì›ƒ êµ¬í˜„
- [x] Collection Viewì˜ í™œìš©
- [x] Mordern Collection View í™œìš©
- [x] multipart/form-dataì˜ êµ¬ì¡° íŒŒì•…
- [x] URLSessionì„ í™œìš©í•œ multipart/form-data ìš”ì²­ ì „ì†¡
- [x] ì‚¬ìš©ì ì¹œí™”ì ì¸ UI/UX êµ¬í˜„ (ì ì ˆí•œ ì…ë ¥ ì»´í¬ë„ŒíŠ¸ ì‚¬ìš©, ì•Œë§ì€ í‚¤ë³´ë“œ íƒ€ì… ì§€ì •)
- [x] ìƒì† í˜¹ì€ í”„ë¡œí† ì½œ ê¸°ë³¸êµ¬í˜„ì„ í†µí•´ (ìˆ˜ì •/ë“±ë¡ ê³¼ì •ì˜) ê³µí†µê¸°ëŠ¥ êµ¬í˜„


## ğŸ“š ì°¸ê³ ë¬¸ì„œ
- URLSession
    - Fetching Website Data into Memory
- UICollectionView
    - Modern cell configuration
    - Lists in UICollectionView
    - Implementing Modern Collection Views
- API
    - Yagom Academy iOS - OpenMarket API


## ğŸ“ ê¸°ëŠ¥ì„¤ëª…
### `Mock`
 - MockURLSession: ë„¤íŠ¸ì›Œí¬ê°€ ì—°ê²°ë˜ì§€ ì•Šì€ ìƒíƒœì—ì„œ Unit Testë¥¼ ì§„í–‰í• ë•Œ ì‚¬ìš©í•  ì½”ë“œ ì…ë‹ˆë‹¤ 
### `Extension`
 - String+Extension
    - func strikeThrough(): DisCountPriceê°€ ìˆìœ¼ë©´ Labelì— CancelLine ì„ ë§Œë“¤ì–´ì¤„ í•¨ìˆ˜ì…ë‹ˆë‹¤
 - UIImage+Extension
    - func logImageSizeInKB(): ì´ë¯¸ì§€ì˜ í¬ê¸°ë¥¼ KBë‹¨ìœ„ë¡œ ê³„ì‚°í•˜ì—¬ ë°˜í™˜í•´ì£¼ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤
 - UIImageView + Extension
    - func setImageURL(): ì´ë¯¸ì§€ë¥¼ ìºì‹±í•´ì¤ë‹ˆë‹¤
### `Enum`
 - URLCollection: URLì£¼ì†Œë¥¼ Enum íƒ€ì…ìœ¼ë¡œ ë§Œë“¤ì–´ì£¼ì—ˆìŠµë‹ˆë‹¤
 - CustomError: Error íƒ€ì…ì„ ëª¨ì•„ë†“ì€ê³³ ì…ë‹ˆë‹¤
### `View`
 - GridCollectionViewCell: GridCollectionViewCell ì˜ ë·°ë¥¼ ê·¸ë ¤ì¤ë‹ˆë‹¤
 - ListCollectionViewCell: ListCollectionViewCell ì˜ ë·°ë¥¼ ê·¸ë ¤ì¤ë‹ˆë‹¤
 - AddProductCollectionViewCell: ìƒí’ˆë“±ë¡ í™”ë©´ ë·°ë¥¼ ê·¸ë ¤ì¤ë‹ˆë‹¤
 - PaddingLabel: Labelì— Padding ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ê¸° ìœ„í•œ ì½”ë“œì…ë‹ˆë‹¤
### `Model` 
 - ProductListResponse: API ì£¼ì†Œì—ì„œ ê°€ì ¸ì˜¨ Json íƒ€ì…ì˜ ìƒí’ˆ ë¦¬ìŠ¤íŠ¸ ë°ì´í„°ë“¤ì„   ë‹´ì„ Model êµ¬ì¡°ì²´ ì…ë‹ˆë‹¤
 - Product: API ì£¼ì†Œì—ì„œ ê°€ì ¸ì˜¨ Json íƒ€ì…ì˜ ìƒí’ˆì˜ ìƒì„¸ ë°ì´í„°ë“¤ì„ ë‹´ì„ Model êµ¬   ì¡°ì²´ ì…ë‹ˆë‹¤
 - ImageCacheManager: ì‹±ê¸€í†¤ìœ¼ë¡œ ì´ë¯¸ì§€ìºì‹œë¥¼ ì²˜ë¦¬í•˜ê¸° ìœ„í•œ í´ë˜ìŠ¤ì…ë‹ˆë‹¤
 - JsonParser 
    - dataTask(): ë§¤ê°œë³€ìˆ˜ë¡œ ë°›ì€ URL ì£¼ì†Œë¥¼ GET ë°©ì‹ìœ¼ë¡œ ì„œë²„ì™€ ë°ì´í„°ë¥¼ ì£¼ê³ ë°›        ì€í›„ Escaping Closureë¡œ ê²°ê³¼ê°’ì„ ë°˜í™˜í•´ ì¤ë‹ˆë‹¤.
### `ViewController`
 - MainController: SegmentSwitch ë¥¼ ì»¨íŠ¸ë¡¤ í•˜ê³  ì„¸ê·¸ë¨¼íŠ¸ Select ì— ë”°ë¼      List ì™€ Grid í™”ë©´ì„ ë³´ì—¬ì£¼ëŠ” ì½”ë“œ ì…ë‹ˆë‹¤.
 - ListViewController: UICollectionView List í™”ë©´ì„ êµ¬í˜„í•˜ëŠ” ì½”ë“œ ì…ë‹ˆë‹¤ 
 - GridViewController: UICollectionView Grid í™”ë©´ì„ êµ¬í˜„í•˜ëŠ” ì½”ë“œ ì…ë‹ˆë‹¤
 - AddProductViewController: ìƒí’ˆë“±ë¡ í™”ë©´ì„ êµ¬í˜„í•˜ëŠ” ì½”ë“œ ì…ë‹ˆë‹¤.

    
## ğŸš€ TroubleShooting
    
### ğŸš€ STEP 1

#### T1. HTTP method `POST` í…ŒìŠ¤íŠ¸
`POST` method ë¥¼ í†µí•´ ì„œë²„ì— í…ŒìŠ¤íŠ¸ ë°ì´í„°ë¥¼ APIë¬¸ì„œë¥¼ ë³´ë©´ì„œ í•„ìš”í•œ ì •ë³´ì— ëŒ€í•´ Json í˜•ì‹ìœ¼ë¡œ `POST`ë¥¼ í•´ì£¼ì—ˆì§€ë§Œ, ê³„ì†í•´ì„œ `400` ì—ëŸ¬ê°€ ë°œìƒë˜ì—ˆìŠµë‹ˆë‹¤. ì•Œê³  ë³´ë‹ˆ í•´ë‹¹ ì„œë²„ ì ‘ê·¼ì— í•„ìš”í•œ `id` ì™€ `password`ê°€ ì•„ì§ í• ë‹¹ ë°›ì§€ ëª»í•´ì„œ ë°œìƒëœ ì—ëŸ¬ì˜€ìŠµë‹ˆë‹¤.    

#### T2. ë„¤íŠ¸ì›Œí¬ê°€ ì—°ê²°ë˜ì§€ ì•Šì„ ë•Œ ë„¤íŠ¸ì›Œí¬ `Unit` í…ŒìŠ¤íŠ¸
ë„¤íŠ¸ì›Œí¬ Unit í…ŒìŠ¤íŠ¸ ëª©ì : ì¸í„°ë„·ì— ì˜ì¡´í•˜ê¸° ë–„ë¬¸ì— í…ŒìŠ¤íŠ¸ë¥¼ ì‹ ë¢°í•  ìˆ˜ ì—†ì–´ì„œ, ì‹¤ì œ ì„œë²„ì™€ í†µì‹ í•˜ë©´ ì˜ë„ì¹˜ ì•Šì€ ê²°ê³¼ ë„ì¶œë  ìˆ˜ ìˆìŒ. ì‹¤ì œ ì„œë²„ì— ì˜í–¥ì´ ê°ˆ ìˆ˜ ë„ ìˆì–´ í…ŒìŠ¤íŠ¸ê°€ í•„ìˆ˜ì ì´ë‹¤. í•˜ì§€ë§Œ í…ŒìŠ¤íŠ¸ ì½”ë“œ ì§ì ‘ ì‘ì„±í•˜ê³  ë‚˜ì„œ ì‹¤í–‰ ì‹œ ê²°ê³¼ ê°’ì´ í´ë¡œì €ì˜ ë°ì´í„°ê°’ì„ í™•ì¸í•˜ëŠ” ê²ƒì´ê¸° ë•Œë¬¸ì— ë¹„ë™ê¸°ì ìœ¼ë¡œ ì‹¤í–‰ë˜ì„œ ë¬´ì¡°ê±´ `SUCCESS`ë¡œ ë˜ì–´ì„œ ë¹„ë™ê¸° í…ŒìŠ¤íŠ¸ì— ëŒ€í•œ ì§€ì‹ì´ í•„ìš”í•˜ë‹¤.
    
### ğŸš€ STEP 2

#### T1. UI ìƒì„± ì‹œ ìŠ¤í† ë¦¬ë³´ë“œ vs ì½”ë“œ
ì´ë²ˆ í”„ë¡œì íŠ¸ì—ì„œ ìŠ¤í† ë¦¬ë³´ë“œë¥¼ í™œìš©í•´ UIë¥¼ ì„¤ê³„í•´ë³´ì•˜ëŠ”ë°, ì½”ë“œë¡œ ì„¤ê³„í–ˆì„ ë•Œì™€ ë§ì´ ë‹¬ëìŠµë‹ˆë‹¤. ê°œì¸ì ìœ¼ë¡œ ëŠë¼ê¸°ì—ëŠ” í° í‹€ì„ ê·¸ë¦´ë•ŒëŠ” ìŠ¤í† ë¦¬ë³´ë“œê°€ ë¹ ë¥´ê³  ì‰½ê²Œ ê°€ëŠ¥ í–ˆì§€ë§Œ ë§‰ìƒ ì„¸ì„¸í•œ ì„¤ì •ì„ í•´ì•¼í•  ìƒí™©ì—ì„œëŠ” ì½”ë“œë¡œ í•˜ëŠ” ê²Œ ì¢‹ë‹¤ê³  ëŠê»´ì¡ŒìŠµë‹ˆë‹¤. íŠ¹íˆ ì´ë²ˆí”„ë¡œì íŠ¸ì—ì„œ ì˜¤í† ë ˆì•„ì›ƒì— ëŒ€í•œ ê³ ë¯¼ì„ ë§ì´ í•´ë´¤ì„ë•Œ ìŠ¤í† ë¦¬ë³´ë“œë¡œ í•˜ëŠ” ê²ƒë³´ë‹¨ ì½”ë“œë¡œ í–ˆìœ¼ë©´ ì–´ë–—ì„ê¹Œ ìƒê°ì´ ë“¤ì—ˆìŠµë‹ˆë‹¤. ë‹¤ìŒ UI ì„¤ê³„ì‹œ ì½”ë“œë¡œ í•˜ëŠ” ë°©í–¥ì— ëŒ€í•´ì„œ ì¢€ ë” ìƒê°í•´ ë³´ëŠ”ê²Œ ì¢‹ì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤.

#### T2. CollectionViewCell ì¬ì‚¬ìš© ë¬¸ì œ
APIì—ì„œ ë°ì´í„°ë¥¼ ì ê²Œ ê°€ì ¸ì˜¬ ë•ŒëŠ” ë¬¸ì œê°€ ì—†ì—ˆì§€ë§Œ, ë°ì´í„°ì˜ ê°¯ìˆ˜ê°€ 30~40ê°œê°€ ë„˜ì–´ê°€ê²Œ ë˜ë©´ ìŠ¤í¬ë¡¤ ì‹œ í•´ë‹¹ ë¼ë²¨ì— ëŒ€í•œ ì •ë³´ê°€ ì„ì¸ í˜„ìƒì„ ë³¼ ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤. í•´ê²° ë°©ë²•ì— ëŒ€í•´ì„œ ìƒê°í•´ë³´ì•˜ëŠ”ë° ì…€ ì¬ì‚¬ìš©ì‹œ í˜¸ì¶œë˜ëŠ” ë©”ì†Œë“œ `prepareForReuse()`ë¥¼ í†µí•´ í•´ê²°í•´ë³´ê¸´ í–ˆì§€ë§Œ [ì• í”Œì—ì„œëŠ” `prepareForReuse()`ì—ì„œ cellì˜ itemì„ ì´ˆê¸°í™”í•´ì£¼ê±°ë‚˜ ë³€ê²½ì‹œì¼œì£¼ëŠ” ê¸°ëŠ¥ ì‹œ ì‚¬ìš©ì„ ì§€ì–‘í•œë‹¤ê³  ë‚˜ì™€ ìˆì–´ ì‚¬ìš©ì„ ë‹¤ë¥¸ ìƒê°ì„ í•´ë³´ì•˜ìŠµë‹ˆë‹¤.](https://developer.apple.com/documentation/uikit/uicollectionreusableview/1620141-prepareforreuse) 
ì•„ë˜ êµ¬ë¬¸ì— í•´ë‹¹ ë‚´ìš©ì´ ë‚˜ì™€ ìˆì—ˆìŠµë‹ˆë‹¤.
>Override this method in your subclass to reset properties to their default values and make the view ready to use again. Donâ€™t use this method to assign any new data to the view; thatâ€™s the responsibility of your data source object.
    
ê·¸ë˜ì„œ cellì´ ìƒì„±ë˜ëŠ” ë©”ì†Œë“œ `func collectionView(_ collectionView: UICollectionView, cellForItemAt indexPath: IndexPath) -> UICollectionViewCell`ì—ì„œ ê° ë¼ë²¨ë“¤ì˜ ë°ì´í„°ë“¤ì„ ì´ˆê¸°í™”ì‹œì¼œì£¼ê³  ì¬ í• ë‹¹í•´ì£¼ëŠ” ë°©ì‹ìœ¼ë¡œ ì½”ë“œë¥¼ ì‘ì„±í•´ë³´ë‹ˆ ì›í•˜ëŠ”ëŒ€ë¡œ ë™ì‘í•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. ë¬´ì¡°ê±´ `prepareForReuse()`ì‚¬ìš©í•´ì„œ ì¬ì‚¬ìš©ì„±ì— ëŒ€í•œ ê³ ë¯¼ì„ í•´ê²°í–ˆì„í…ë° ìƒê°ì˜ ì „í™˜ì´ ë˜ëŠ” ê³„ê¸°ê°€ ë˜ì—ˆìŠµë‹ˆë‹¤.

#### T3. ë°ì´í„° ë¡œë“œ ì‹œ ë¡œë”© ì°½ êµ¬í˜„
ìš”êµ¬ì‚¬í•­ì— ë°ì´í„°ê°€ ë¡œë“œí•  ë–„ê¹Œì§€ ë³„ë„ë¡œ ë¡œë”© ì°½ì„ ë„ì–´ì£¼ëŠ” ë·°ë¥¼ ì¶”ê°€í•´ì•¼ í–ˆì—ˆìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ `viewDidLoad` í•´ë‹¹ ì‹¤í–‰í•˜ëŠ” í•¨ìˆ˜ë¥¼ ë„£ì–´ ì‹¤í–‰í•´ë³´ë‹ˆ `viewDidLoad` ë©”ì†Œë“œ ë‚´ì— ì„ ì–¸ë˜ì–´ ìˆëŠ” ë©”ì†Œë“œë“¤ì´ ë‹¤ ì¢…ë£Œê°€ ë˜ì–´ì•¼ì§€ ì²« viewê°€ ë³´ì—¬ì£¼ì–´ì„œ ë³„ë„ë¡œ ë¡œë”© ì°½ì´ ë‚˜ì˜¤ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. view ë¼ì´í”„ ì‚¬ì´í´ì— ëŒ€í•´ ìƒê°í•´ ë³´ì•˜ê³  `viewDidAppear`ì—ì„œ ì»¬ë ‰ì…˜ë·°ì— ë°ì´í„°ë¥¼ ë„£ì–´ì£¼ëŠ” ë©”ì†Œë“œë¥¼ ë„£ì–´ì£¼ê³  ë‚˜ë¨¸ì§€ëŠ” `viewDidLoad`ë¥¼ ë„£ì–´ì¤˜ì„œ ë¡œë”© ì°½ì„ êµ¬í˜„í–ˆê³  APIì—ì„œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” ì‹œì ì—ì„œ ì• ë‹ˆë©”ì´ì…˜ì„ ì¢…ë£Œì‹œì¼œì£¼ê³  ì»¬ë ‰ì…˜ë·°ë¥¼ `reloadData()` ë©”ì†Œë“œë¥¼ ë„£ì–´ì£¼ì–´ ì»¬ë ‰ì…˜ë·°ë¥¼ ë‹¤ì‹œ ê·¸ë ¤ì£¼ëŠ” ë¡œì§ìœ¼ë¡œ êµ¬í˜„í•´ í•´ê²°í–ˆìŠµë‹ˆë‹¤.
    
#### T4. Grid CollectionView Column 2Line ìœ¼ë¡œ ë§Œë“¤ê¸° ë° Cell ê°„ê²© ë„ìš°ê¸°
Grid í˜•íƒœì˜ CollectionView ì—ì„œ 2ì—´í˜•íƒœ ë° Cell ê°„ê²©ì„ ë„ì›Œì£¼ëŠ” Layoutì´ ìš”êµ¬ì‚¬í•­ì´ì—ˆìŠµë‹ˆë‹¤ ì²˜ìŒì—” ìŠ¤í† ë¦¬ë³´ë“œë¡œ í•˜ë ¤ê³  í–ˆì§€ë§Œ Attributes inspector ì—ë„ ì„¤ì •í•˜ëŠ”ê³³ì´ ì—†ì–´ UICollectionVIewDelegateFlowLayout ì— ìˆëŠ” Cellì˜ í¬ê¸°ë¥¼ ì„¤ì •í•´ì£¼ê³  Cellì‚¬ì´ì˜ Spacing ì„ ì„¤ì •í•´ì£¼ëŠ” ì½”ë“œë¡œ í•´ë‹¹ ìš”êµ¬ì‚¬í•­ì„ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.
    

### ğŸš€ STEP 3

#### T1. HTTP POST ì‹œ ì„œë²„ ì—ëŸ¬ 1 - JSON

#####  ì—ëŸ¬ ë©”ì‹œì§€
```shell
"code":400,"message":"JSON parse error: Cannot construct instance of `edu.yagom.dev.ecommerce.rest.product.params.ProductCreationParams` (although at least one Creator exists): no int/Int-argument constructor/factory method to deserialize from Number value (154); nested exception is com.fasterxml.jackson.databind.exc.MismatchedInputException: Cannot construct instance of `edu.yagom.dev.ecommerce.rest.product.params.ProductCreationParams` (although at least one Creator exists): no int/Int-argument constructor/factory method to deserialize from Number value (154)\n at [Source: (PushbackInputStream); line: 1, column: 1]"
```

##### ë¬¸ì œì 
multipart/form-dataë¡œ POST ì‹œ ìœ„ì™€ ê°™ì€ ì—ëŸ¬ê°€ ë°œìƒ í–ˆìŠµë‹ˆë‹¤.
ì—ëŸ¬ ë©”ì‹œì§€ì— ì¤‘ìš”í•œ ë¶€ë¶„ì€ `no int/Int-argument constructor/factory method to deserialize from Number value (154)\n at [Source: (PushbackInputStream); line: 1, column: 1]"` ìœ¼ë¡œ ë³´ì—¬ì§‘ë‹ˆë‹¤.
í•´ì„í•˜ìë©´ "ë„˜ë²„ ê°’(154)ì— ëŒ€í•œ ë””ì´ë‹ˆì…œë¼ì´ì € ë©”ì†Œë“œê°€ ì—†ë‹¤?" ë¼ëŠ” ì—ëŸ¬ ë©”ì‹œì§€ ì¸ ê²ƒ ê°™ì€ë° ì–´ë–»ê²Œ í•´ê²°í•˜ë©´ ì¢‹ì„ê¹Œ ìƒê°í•´ë³´ì•˜ìŠµë‹ˆë‹¤.


#### í•´ê²°ë°©ë²•
ì¼ë‹¨ ì½”ë“œì—ì„œ "154"ë¼ëŠ” ë°ì´í„°ë¥¼ ë³´ë‚´ì§€ ì•Šê³  ìˆìŠµë‹ˆë‹¤.
ê·¸ë˜ì„œ  multipart/form-data êµ¬ì¡°ì—ì„œ ì‹¤ì œ ë°ì´í„°ê°’ì´ ë“¤ì–´ê°€ ìˆëŠ” Body ë¥¼ í™•ì¸í•´ ë³´ì•˜ìŠµë‹ˆë‹¤.
![image](https://user-images.githubusercontent.com/45350356/181588628-e28df7ee-1041-4383-8aef-4ee35dc4d6d1.png)
ìœ„ì˜ ë¹¨ê°„ ë„¤ëª¨ì¹¸ì— 154 bytesê°€ valueë¡œ ë“¤ì–´ê°€ ìˆëŠ” ê²ƒì²˜ëŸ¼ ë³´ì´ëŠ”ë° Body ë°ì´í„°ë¥¼ ë§Œë“¤ì–´ì£¼ëŠ” ë¶€ë¶„ì˜ ì½”ë“œë¥¼ í™•ì¸ í•´ë³´ë‹ˆ
![image](https://user-images.githubusercontent.com/45350356/181590932-b9e0481a-dde6-440b-b92b-18776ce29239.png)
í•´ë‹¹ `value` íƒ€ì… ê°’ì€ `Data`ì¸ëŒ€, Bodyì˜ `value`ê°’ì„ JSON í˜•ì‹ìœ¼ë¡œ ë³´ë‚´ì•¼ í•˜ëŠ”ë° Dataí˜•ì‹ìœ¼ë¡œ ë³´ë‚´ê³  ìˆì–´ ì•ì„œ ë°œìƒí•œ ì—ëŸ¬ê°€ ë‚˜ì˜¨ ê²ƒìœ¼ë¡œ íŒë‹¨ë˜ì—ˆìŠµë‹ˆë‹¤.
ê·¸ë˜ì„œ JSONí˜•ì‹ì€ í…ìŠ¤íŠ¸ í˜•ì‹ìœ¼ë¡œ ë˜ì–´ ìˆì–´ í•´ë‹¹ `value`ê°’ì„ Stringí˜•ì‹ìœ¼ë¡œ íƒ€ì…ìºìŠ¤íŒ…? ë³€í™˜ì„ í•´ì£¼ì—ˆìŠµë‹ˆë‹¤.
![image](https://user-images.githubusercontent.com/45350356/181591350-c14b833f-fb3f-4a17-9a58-b8b8cf8ac4d0.png)
ìœ„ì˜ ì½”ë“œì²˜ëŸ¼
```swift
String(data: , encoding: .utf8)
```
í˜•íƒœë¡œ Stringíƒ€ì…ìœ¼ë¡œ ë§Œë“¤ì–´ ì£¼ì—ˆëŠ”ë°, ê°•ì œë¡œ í•œ ëŠë‚Œì´ ê°•í•´ì„œ íƒ€ì…ìºìŠ¤íŒ… í•˜ëŠ” ë¶€ë¶„ì´ ìˆ˜ì •ì´ í•„ìš”í•  ê²ƒìœ¼ë¡œ ë³´ì…ë‹ˆë‹¤.
ì¬ ì‹¤í–‰ ê²°ê³¼...
![image](https://user-images.githubusercontent.com/45350356/181591840-6d83b13e-a32d-4187-94a9-b51481a64b43.png)
ìœ„ì˜ ê²°ê³¼ì²˜ëŸ¼ í…ìŠ¤íŠ¸í˜•ì‹ìœ¼ë¡œ JSON ë°ì´í„°ê°€ ì˜ ë“¤ì–´ê°„ ê²ƒì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

#### T2. HTTP POST ì‹œ ì„œë²„ ì—ëŸ¬ 2 - Image
##### ì—ëŸ¬ ë©”ì‹œì§€
```shell
"code":400,"message":"Failed to parse multipart servlet request; nested exception is java.io.IOException: org.apache.tomcat.util.http.fileupload.FileUploadException: Header section has more than 10240 bytes (maybe it is not properly terminated)"
```
#### ë¬¸ì œì 
ì—ëŸ¬ ë©”ì‹œì§€ë¥¼ ë³´ë‹ˆ `Header section has more than 10240 bytes`ì´ ë¶€ë¶„ì´ í•µì‹¬ì¸ ê²ƒìœ¼ë¡œ ë³´ì…ë‹ˆë‹¤. í•´ì„í•˜ìë©´ "í—¤ë” ì„¹ì…˜ì´ 10240ë°”ì´íŠ¸ë¥¼ ì´ˆê³¼í•©ë‹ˆë‹¤." ë¼ëŠ” ë‚´ìš©ì¸ëŒ€, "ì²˜ìŒì—” requestì˜ Header ë°ì´í„°ë¥¼ ë„ˆë¬´ ë§ì´ ë„£ì—ˆë‚˜" ë¼ê³  ìƒê° í–ˆì—ˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ Headerì— `Content-Type`, `identifier`ë§Œ ë„£ì–´ì£¼ê¸° ë•Œë¬¸ì— ì•„ë‹Œ ê²ƒ ê°™ê³  fileuploadì˜ íŒíŠ¸ë¡œ image ë°ì´í„°ê°€ ë¬¸ì œë¡œ ë³´ì—¬ ì§‘ë‹ˆë‹¤.

#### í•´ê²°ë°©ë²•
ë‹¤í–‰ìŠ¤ëŸ½ê²Œë„ ë™ì¼í•œ ê³ ë¯¼ì— ë‹µë³€ì„ [stackoverflow](https://stackoverflow.com/questions/54437636/header-section-has-more-than-10240-bytes-maybe-it-is-not-properly-terminated)ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.

ìœ„ì˜ ë‚´ìš© ì¤‘  "I ran into this same issue and it turns out JIRA (or Java) requires \r\n as new line character. After I changed \n to \r\n my requests went through without problem."ë¬¸ì¥ì„ í•´ì„ í•´ë³´ë‹ˆ "`\r\n`ë¥¼ í•œë²ˆë” í™•ì¸í•´ë¼" ì¸ ê²ƒ ê°™ì•„
ë°ì´í„° ë„£ëŠ” ë¶€ë¶„ì˜ ë§¨ ëì— `\r\n`ì„ ì¶”ê°€ í•´ì£¼ì—ˆë”ë‹ˆ ì •ìƒì ìœ¼ë¡œ `POST`ê°€ ë˜ì—ˆìŠµë‹ˆë‹¤.
![image](https://user-images.githubusercontent.com/45350356/181594117-c724f26f-b46b-4182-bb9e-fa650a44ae31.png)
ì•„ì§ ì •í™•í•˜ê²Œ ì´í•´í•œê±´ ì•„ë‹ˆì§€ë§Œ, êµ¬ì¡°ê°€ ì²˜ìŒ ì‘ì„±í•œ ì½”ë“œëŒ€ë¡œ ë˜ì–´ ìˆì—ˆë‹¤ë©´ 
![image](https://user-images.githubusercontent.com/45350356/181594461-93247fda-a43e-40d8-bed2-e1c1aac2f995.png)
ìœ„ì˜ ì‚¬ì§„ì²˜ëŸ¼ Bodyì˜ Headerë¶€ë¶„ê³¼ valueë¶€ë¶„ì´ ì—†ê³  ë¶™ì–´ìˆëŠ” ìƒíƒœë¡œ ë˜ì–´ ìˆì—ˆê³ 
![image](https://user-images.githubusercontent.com/45350356/181594722-f63fb383-c4b7-4b1c-a2d7-40859bc54f5e.png)
ë‹¤ì‹œ ìˆ˜ì •í•´ì„œ ì‹¤í–‰ì‹œì¼œë³´ë‹ˆ
![image](https://user-images.githubusercontent.com/45350356/181594900-cf9ddeb0-5dec-4d8b-8e2b-8ea776bb4f77.png)
 Bodyì˜ Headerë¶€ë¶„ê³¼ valueë¶€ë¶„ì´ ë¶„ë¦¬ë˜ì–´ ìˆëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆê³  ì •ìƒì ìœ¼ë¡œ POSTê°€ ë˜ì–´ í•´ê²°í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.
